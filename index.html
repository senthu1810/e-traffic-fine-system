<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>E-Traffic Fine System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- AOS for scroll animations -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />

  <link rel="stylesheet" href="css/index_style.css">
</head>
<body>

<header>
  <div class="logo">
    <img src="photos/logo.png" alt="Logo">
    <span>E-Traffic Fine System</span>
  </div>
  <nav class="d-none d-md-flex">
    <a href="#about">About Us</a>
    <a href="#contact">Contact Us</a>
  </nav>
  <div class="login-btn">
    <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Login</a>
  </div>
</header>

<section class="hero text-center text-white d-flex flex-column justify-content-center align-items-center" data-aos="fade-up">
  <div class="hero-overlay">
    <h1 class="mt-4">Smart Traffic Fine System</h1>
    <p class="lead">Secure, simple and fast way to manage traffic violations.</p>
    <a href="#" class="btn btn-light btn-lg mt-3" data-bs-toggle="modal" data-bs-target="#loginModal">Get Started</a>
  </div>
</section>


<section id="about" data-aos="fade-right">
  <div class="container bg-white rounded p-5 shadow-sm text-dark">
    <div class="row align-items-center">
      <div class="col-md-6">
        <img src="photos/about1.png" class="img-fluid rounded" alt="About Us">
      </div>
      <div class="col-md-6">
        <h2>About Our System</h2>
        <p>Our E-Traffic Fine System brings convenience and clarity to traffic fine management. Police can issue fines easily, users can pay online securely, and the process remains transparent.</p>
      </div>
    </div>
  </div>
</section>

<section id="contact" data-aos="fade-left">
  <div class="container bg-white rounded p-5 shadow-sm text-dark">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h2>Contact Us</h2>
        <p>Have feedback or need support? Don’t hesitate to reach out.</p>
        <p><strong>Email:</strong> support@etraffic.com</p>
        <p><strong>Phone:</strong> 021-22-678-90</p>
      </div>
      <div class="col-md-6">
        <img src="photos/contact1.avif" class="img-fluid rounded" alt="Contact">
      </div>
    </div>
  </div>
</section>

<footer class="footer">
  <div class="footer-links">
    <a href="#about">About Us</a> |
    <a href="#contact">Contact Us</a> |
    <a href="includes/privacy_policy.html">Privacy</a> |
    <a href="includes/terms_of_use.html">Terms of Use</a>
  </div>
  <p class="mt-2">&copy; 2025 E-Traffic Fine System. All Rights Reserved</p>
</footer>

<button onclick="window.scrollTo({ top: 0, behavior: 'smooth' })" class="back-to-top" title="Back to Top">↑</button>

<!-- LOGIN MODAL (User & Police) -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content rounded">
      <div class="modal-header"><h5 class="modal-title" id="loginModalLabel">Login</h5><button class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <ul class="nav nav-tabs mb-3" id="loginTabs">
          <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#userLoginTab">User</button></li>
          <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#policeLoginTab">Police</button></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="userLoginTab">
            <form action="php/login.php" method="post">
              <input type="email" name="email" class="form-control mb-3" placeholder="Email" required>
              <input type="password" name="password" class="form-control mb-3" placeholder="Password" required>
              <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-primary">Login as User</button>
                <button type="reset" class="btn btn-outline-secondary">Clear</button>
              </div>
            </form>
            <p class="mt-2 text-center"><a href="#" data-bs-toggle="modal" data-bs-target="#registerUserModal">Don't have an account? Sign up</a></p>
          <!-- <p class="text-center mt-2">
          <a href="forgot_password.html">Forgot Password?</a>
            </p>   -->
 
          </div>
          <div class="tab-pane fade" id="policeLoginTab">
            <form action="php/login.php" method="post">
              <input type="email" name="email" class="form-control mb-3" placeholder="Email" required>
              <input type="password" name="password" class="form-control mb-3" placeholder="Password" required>
              <input type="hidden" name="role" value="police">
              <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-secondary">Login as Police</button>
                <button type="reset" class="btn btn-outline-secondary">Clear</button>
              </div>
            </form>
            <p class="mt-2 text-center"><a href="#" data-bs-toggle="modal" data-bs-target="#registerPoliceModal">Don't have an account? Sign up</a></p>
           <!-- <p class="text-center mt-2">
              <a href="forgot_password.html">Forgot Password?</a>
            </p>    -->
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- REGISTER USER MODAL -->
<div class="modal fade" id="registerUserModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content rounded">
      <div class="modal-header bg-success text-white"><h5 class="modal-title">User Registration</h5><button class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <form action="php/register_user.php" method="post">
          <div class="mb-3"><input type="text" name="first_name" class="form-control" placeholder="First Name" required></div>
          <div class="mb-3"><input type="text" name="last_name" class="form-control" placeholder="Last Name" required></div>
          <div class="mb-3"><input type="email" name="email" class="form-control" placeholder="Email" required></div>
          <div class="mb-3"><input type="password" name="password" class="form-control" placeholder="Password (6–12 characters)" minlength="6" maxlength="12" required></div>
          <div class="mb-3"><input type="text" name="nic" class="form-control" placeholder="NIC Number (12 characters)" maxlength="12" pattern="\d{12}" required></div>
          <div class="mb-3"><input type="text" name="phone" class="form-control" placeholder="Phone Number (10 digits)" maxlength="10" pattern="\d{10}" required></div>
          <div class="mb-3">
            <select name="security_question" class="form-select" required>
              <option value="">Select Security Question</option>
              <option value="pet">What is your pet's name?</option>
              <option value="school">What is your primary school name?</option>
              <option value="city">In what city were you born?</option>
            </select>
          </div>
          <div class="mb-3"><input type="text" name="security_answer" class="form-control" placeholder="Security Answer" required></div>
          <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-success">Register</button>
            <button type="reset" class="btn btn-outline-secondary">Clear</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- REGISTER POLICE MODAL -->
<div class="modal fade" id="registerPoliceModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content rounded">
      <div class="modal-header bg-primary text-white"><h5 class="modal-title">Police Registration</h5><button class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <form action="php/register_police.php" method="post">
          <div class="mb-3"><input type="text" name="first_name" class="form-control" placeholder="First Name" required></div>
          <div class="mb-3"><input type="text" name="last_name" class="form-control" placeholder="Last Name" required></div>
          <div class="mb-3"><input type="text" name="nic" class="form-control" placeholder="NIC Number (12 characters)" maxlength="12" pattern="\d{12}" required></div>
          <div class="mb-3"><input type="text" name="job_id" class="form-control" placeholder="Job ID" required></div>
          <div class="mb-3"><input type="email" name="email" class="form-control" placeholder="Email" required></div>
          <div class="mb-3"><input type="text" name="mobile" class="form-control" placeholder="Mobile No (10 digits)" maxlength="10" pattern="\d{10}" required></div>
          <div class="mb-3"><input type="password" name="password" class="form-control" placeholder="Password (6–12 characters)" minlength="6" maxlength="12" required></div>
          <div class="mb-3"><input type="text" name="security_q1" class="form-control" placeholder="What is your badge number?" required></div>
          <div class="mb-3"><input type="text" name="security_q2" class="form-control" placeholder="What city were you born in?" required></div>
          <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-primary">Register</button>
            <button type="reset" class="btn btn-outline-secondary">Clear</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
  AOS.init({ duration: 1100, once: true });
</script>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    const params = new URLSearchParams(window.location.search);
    if (params.has("error")) {
      const error = params.get("error").replace(/\+/g, " ");
      alert(error); // Show popup
      // Reload without parameters, but reopen modal
      window.location.href = "index.html#loginModalOpen";
    }

    // If user came from reload after error, open modal
    if (window.location.hash === "#loginModalOpen") {
      const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
      loginModal.show();
    }
  });
</script>

</body>
</html>
